## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–ü–æ–ª–Ω—ã–π DevOps —Ü–∏–∫–ª —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Kubernetes –∫–ª–∞—Å—Ç–µ—Ä–µ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∏ CI/CD.

## üåê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **k8s-master**: 158.160.125.160 (Kubernetes control-plane)
- **k8s-app**: 158.160.115.144 (Kubernetes worker) 
- **srv**: 158.160.120.153 (CI/CD, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, registry)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Terraform)
```bash
cd terraform
terraform init
terraform apply
2. –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (Ansible)
bash
cd ansible
ansible-playbook -i inventory.ini 00_full_deployment.yml
3. –†—É—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—Å–ª–µ Ansible
–ù–∞ SRV —Å–µ—Ä–≤–µ—Ä–µ:

bash
# Docker Registry
docker run -d -p 5000:5000 --restart=always --name registry registry:2

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ stack
docker-compose -f docker-compose-monitoring.yml up -d

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ insecure registry –¥–ª—è K3S
sudo nano /etc/rancher/k3s/registries.yaml
# –î–æ–±–∞–≤–∏—Ç—å:
# mirrors:
#   "158.160.120.153:5000":
#     endpoint: ["http://158.160.120.153:5000"]
–ù–∞ K8S Master:

bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞ K3S (—É–∂–µ —á–µ—Ä–µ–∑ Ansible)
# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –¥–ª—è worker –Ω–æ–¥—ã:
sudo cat /var/lib/rancher/k3s/server/node-token
–ù–∞ K8S Worker:

bash
# –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–ª–∞—Å—Ç–µ—Ä—É
curl -sfL https://get.k3s.io | K3S_URL=https://158.160.125.160:6443 K3S_TOKEN=–í–ê–®_–¢–û–ö–ï–ù sh -
4. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
bash
# –ß–µ—Ä–µ–∑ CI/CD —Å–∫—Ä–∏–ø—Ç
./scripts/ci-helm-final.sh v1.0.0

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Helm
cd helm-charts/django-app
helm install my-app .
üì¶ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
Ansible (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):
Docker, docker-compose

Kubernetes (K3S)

kubectl, helm

Python, pip

SSH –∫–ª—é—á–∏

–†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:
Docker Registry (–Ω–∞ SRV)

Prometheus Stack (–Ω–∞ SRV)

Prometheus (–º–µ—Ç—Ä–∏–∫–∏)

Grafana (–¥–∞—à–±–æ—Ä–¥—ã)

Loki (–ª–æ–≥–∏)

Promtail (—Å–±–æ—Ä –ª–æ–≥–æ–≤)

Helm Charts (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

CI/CD —Å–∫—Ä–∏–ø—Ç—ã

üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://158.160.125.160:30080

Grafana: http://158.160.120.153:3000 (admin/admin123)

Prometheus: http://158.160.120.153:9090

Docker Registry: http://158.160.120.153:5000

‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
–†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
GitLab –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –ª–æ–∫–∞–ª—å–Ω—ã–π CI/CD —Å–∫—Ä–∏–ø—Ç—ã

–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ ‚Üí Docker –æ–±—Ä–∞–∑—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

Insecure registry ‚Üí –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ K3S registries.yaml

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã)

–ú–µ—Ç—Ä–∏–∫–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (CPU, RAM, disk)

–õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Loki

Telegram –∞–ª–µ—Ä—Ç–∏–Ω–≥

üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
CI/CD:
bash
./scripts/ci-helm-final.sh v1.1.0  # –°–±–æ—Ä–∫–∞ + –¥–µ–ø–ª–æ–π
–ë—ç–∫–∞–ø—ã:
bash
./scripts/backup-simple.sh        # –ë—ç–∫–∞–ø –ë–î
./scripts/restore-backup.sh       # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
bash
kubectl get all                  # –°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl http://localhost:9090/api/v1/alerts  # –ê–∫—Ç–∏–≤–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã
üìû –ê–ª–µ—Ä—Ç–∏–Ω–≥
Telegram –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏:

–ü–∞–¥–µ–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

–ó–∞–∫–∞–Ω—á–∏–≤–∞—é—â–µ–º—Å—è –º–µ—Å—Ç–µ –Ω–∞ –¥–∏—Å–∫–µ

–í—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏: –º–µ–Ω–µ–µ 5 –º–∏–Ω—É—Ç

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏! üöÄ

–≠—Ç–æ—Ç README –¥–∞–µ—Ç –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞! ‚úÖ
